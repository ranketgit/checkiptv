---
import Layout from "../../layouts/Layout.astro";
import Prose from "../../components/Prose.astro"

export async function getStaticPaths() {
    const posts = await Astro.glob('../../posts/*.md');
    return posts.map(post => ({
        params: {
            slug: post.frontmatter.slug 
        },
        props: { post },
    }));
}

const { post } = Astro.props;
const url = Astro.url.pathname;
const { Content } = post;
---

<Layout title={post.frontmatter.title} description={post.frontmatter.excerpt} >
    <article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 bg-white">
        <header class="mb-8 mt-20">
            <h1 class="text-4xl font-bold mb-4">{post.frontmatter.title}</h1>
            <div class="flex gap-4 text-sm text-black">
                <time>{new Date(post.frontmatter.date).toLocaleDateString('fr-FR')}</time>
                <div class="flex gap-2">
                    {post.frontmatter.categories.map(category => (
                        <span class="text-ranket-blue">{category}</span>
                    ))}
                </div>
            </div>
        </header>
        
        {post.frontmatter.image && (
            <img 
                src={post.frontmatter.image} 
                alt={post.frontmatter.title}
                class="w-full h-[400px] object-cover rounded-xl mb-8"
            />
        )}
        
        <div class="prose prose-lg max-w-none ">
        <Prose>
            <Content />
        </Prose>
        </div>
    </article>
</Layout>